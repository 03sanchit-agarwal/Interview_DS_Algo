/*
  Company Tags           : Amazon, Google, IBM, MAQ Software, Microsoft, Walmart, Zoho
  Leetcode Question Link : https://leetcode.com/problems/word-break/
*/

class Solution {
public:
    bool solve(string s, unordered_set<string>& st, unordered_map<string, bool>& mp) {
        if(s.length() == 0)
            return true;
        if(mp.count(s))
            return mp[s];
        for(int k = 1; k<=s.length(); k++) {
            if(st.count(s.substr(0, k)) && solve(s.substr(k), st, mp))
                return mp[s] = true;
        }
        return mp[s] = false;
    }
    bool wordBreak(string s, vector<string>& wordDict) {
        unordered_set<string> st;
        for(string str:wordDict) {
            st.insert(str);
        }
        unordered_map<string, bool> mp;
        return solve(s, st, mp);
    }
};
